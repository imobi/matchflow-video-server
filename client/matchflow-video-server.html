<head>
    <title>Matchflow Video Server</title>
    <link href="http://vjs.zencdn.net/5.8.0/video-js.css" rel="stylesheet">
</head>

<body>
    <header>
        {{> loginButtons}}
    </header>
    {{#if currentUser}}
        {{> videoForm}}
        {{> videoView}}
    {{else}}
        LOGGED OUT
    {{/if}}
    
    <hr>
    <video id="my-video" class="video-js" controls preload="auto" width="640" height="264" data-setup="{}">
        <source src="http://localhost:3005/videotest" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
    
    
    <!--<script src="http://vjs.zencdn.net/5.8.0/video.js"></script>-->
<!--    <hr /> 
    {{> imageForm}}
    {{> imageView}}-->
</body>

<template name="imageForm">
    <input type="file" name="imagefile" class="myFileInput" />
</template>

<template name="imageView">
    <div class="imageView">
        {{#each images}}
        <div>
            {{#if isUploaded}}
                {{#if isImage}}
                    <a href="{{this.url}}" target="_blank">
                        <img src="{{this.url}}" alt="" class="thumbnail" />
                    </a>
                    <button class="deleteFileButton">delete</button>
                {{/if}}
            {{/if}}
        </div>
        {{/each}}
    </div>
</template>


<template name="videoForm">
    <h3>Upload Video:</h3>
    <input type="file" name="videofile" class="myFileInput" />
</template>

<template name="videoView">
    {{#each videos}}
        <div>
            {{#if isUploaded}}
                {{#if isVideo}}
                    <h4>{{this.url}}</h4>
                    <video class="video-js" controls preload="auto" width="640" height="264" data-setup="{}">
                        <source src="{{this.url}}" type="{{this.type}}">
                        Your browser does not support the video tag.
                    </video>
                    <button class="deleteFileButton">delete</button>
                {{/if}}
            {{/if}}
        </div>
    {{/each}}
</template>